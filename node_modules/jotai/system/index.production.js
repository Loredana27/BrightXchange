System.register(["react"],function(R){"use strict";var U,G,T,H,J,N,K,Q,X;return{setters:[function(y){U=y.createContext,G=y.useState,T=y.useEffect,H=y.useRef,J=y.createElement,N=y.useContext,K=y.useReducer,Q=y.useDebugValue,X=y.useCallback}],execute:function(){R({atom:fe,useAtom:de,useAtomValue:ne,useSetAtom:re});const y=Symbol(),Y=i=>!!i[y],ue=i=>!i[y].c,O=i=>{var u,a;(a=(u=i[y]).c)==null||a.call(u)},k=(i,u)=>{const a=i[y].o,f=u[y].o;return a===f||i===f||Y(a)&&k(a,u)},Z=i=>{const u={o:i,c:null},a=new Promise(f=>{u.c=()=>{u.c=null,f()},i.then(u.c,u.c)});return a[y]=u,a},W=i=>"init"in i,V="r",x="w",z="c",D="s",ae="h",ee=i=>{const u=new WeakMap,a=new WeakMap,f=new Map;if(i)for(const[t,e]of i){const o={v:e,r:0,y:!0,d:new Map};u.set(t,o)}const d=new WeakMap,p=(t,e,o)=>{let n=d.get(e);n||(n=new Map,d.set(e,n)),o.then(()=>{n.get(t)===o&&(n.delete(t),n.size||d.delete(e))}),n.set(t,o)},m=t=>{const e=new Set,o=d.get(t);return o&&(d.delete(t),o.forEach((n,s)=>{O(n),e.add(s)})),e},w=new WeakMap,C=t=>{let e=w.get(t);return e||(e=new Map,w.set(t,e)),e},v=(t,e)=>{if(t){const o=C(t);let n=o.get(e);return n||(n=v(t.p,e),n&&o.set(e,n)),n}return u.get(e)},S=(t,e,o)=>{if(t)C(t).set(e,o);else{const n=u.get(e);u.set(e,o),f.has(e)||f.set(e,n)}},g=(t,e=new Map,o)=>{if(!o)return e;const n=new Map;let s=!1;return o.forEach(r=>{var c;const l=((c=v(t,r))==null?void 0:c.r)||0;n.set(r,l),e.get(r)!==l&&(s=!0)}),e.size===n.size&&!s?e:n},h=(t,e,o,n,s)=>{const r=v(t,e);if(r){if(s&&(!("p"in r)||!k(r.p,s)))return r;"p"in r&&O(r.p)}const c={v:o,r:(r==null?void 0:r.r)||0,y:!0,d:g(t,r==null?void 0:r.d,n)};let l=!(r!=null&&r.y);return!r||!("v"in r)||!Object.is(r.v,o)?(l=!0,++c.r,c.d.has(e)&&(c.d=new Map(c.d).set(e,c.r))):c.d!==r.d&&(c.d.size!==r.d.size||!Array.from(c.d.keys()).every(M=>r.d.has(M)))&&(l=!0,Promise.resolve().then(()=>{b(t)})),r&&!l?r:(S(t,e,c),c)},E=(t,e,o,n,s)=>{const r=v(t,e);if(r){if(s&&(!("p"in r)||!k(r.p,s)))return r;"p"in r&&O(r.p)}const c={e:o,r:((r==null?void 0:r.r)||0)+1,y:!0,d:g(t,r==null?void 0:r.d,n)};return S(t,e,c),c},_=(t,e,o,n)=>{const s=v(t,e);if(s&&"p"in s){if(k(s.p,o))return s.y?s:{...s,y:!0};O(s.p)}p(t,e,o);const r={p:o,r:((s==null?void 0:s.r)||0)+1,y:!0,d:g(t,s==null?void 0:s.d,n)};return S(t,e,r),r},I=(t,e,o,n)=>{if(o instanceof Promise){const s=Z(o.then(r=>{h(t,e,r,n,s)}).catch(r=>{if(r instanceof Promise)return Y(r)?r.then(()=>{P(t,e,!0)}):r;E(t,e,r,n,s)}));return _(t,e,s,n)}return h(t,e,o,n)},pe=(t,e)=>{const o=v(t,e);if(o){const n={...o,y:!1};S(t,e,n)}},P=(t,e,o)=>{if(!o){const s=v(t,e);if(s){if(s.y&&"p"in s&&!ue(s.p))return s;if(s.d.forEach((r,c)=>{if(c!==e)if(!a.has(c))P(t,c);else{const l=v(t,c);l&&!l.y&&P(t,c)}}),Array.from(s.d).every(([r,c])=>{const l=v(t,r);return l&&!("p"in l)&&l.r===c}))return s.y?s:{...s,y:!0}}}const n=new Set;try{const s=e.read(r=>{n.add(r);const c=r===e?v(t,r):P(t,r);if(c){if("e"in c)throw c.e;if("p"in c)throw c.p;return c.v}if(W(r))return r.init;throw new Error("no atom init")});return I(t,e,s,n)}catch(s){if(s instanceof Promise){const r=Z(s);return _(t,e,r,n)}return E(t,e,s,n)}},ve=(t,e)=>P(e,t),we=(t,e)=>{let o=a.get(e);return o||(o=B(t,e)),o},$=(t,e)=>!e.l.size&&(!e.t.size||e.t.size===1&&e.t.has(t)),he=(t,e)=>{const o=a.get(e);o&&$(e,o)&&F(t,e)},q=(t,e)=>{const o=a.get(e);o==null||o.t.forEach(n=>{n!==e&&(pe(t,n),q(t,n))})},oe=(t,e,o)=>{let n=!0;const s=(l,M)=>{const A=P(t,l);if("e"in A)throw A.e;if("p"in A){if(M!=null&&M.unstable_promise)return A.p.then(()=>s(l,M));throw A.p}if("v"in A)return A.v;throw new Error("no value found")},r=(l,M)=>{let A;if(l===e){if(!W(l))throw new Error("atom not writable");m(l).forEach(ie=>{ie!==t&&I(ie,l,M)});const Ae=v(t,l),Me=I(t,l,M);Ae!==Me&&q(t,l)}else A=oe(t,l,M);return n||b(t),A},c=e.write(s,r,o);return n=!1,c},se=(t,e,o)=>{const n=oe(o,t,e);return b(o),n},Ee=t=>!!t.write,B=(t,e,o)=>{const n={t:new Set(o&&[o]),l:new Set};if(a.set(e,n),P(void 0,e).d.forEach((s,r)=>{const c=a.get(r);c?c.t.add(e):r!==e&&B(t,r,e)}),Ee(e)&&e.onMount){const s=c=>se(e,c,t),r=e.onMount(s);t=void 0,r&&(n.u=r)}return n},F=(t,e)=>{var o;const n=(o=a.get(e))==null?void 0:o.u;n&&n(),a.delete(e);const s=v(t,e);s&&s.d.forEach((r,c)=>{if(c!==e){const l=a.get(c);l&&(l.t.delete(e),$(c,l)&&F(t,c))}})},ce=(t,e,o,n)=>{const s=new Set(o.d.keys());n==null||n.forEach((r,c)=>{if(s.has(c)){s.delete(c);return}const l=a.get(c);l&&(l.t.delete(e),$(c,l)&&F(t,c))}),s.forEach(r=>{const c=a.get(r);c?c.t.add(e):a.has(e)&&B(t,r,e)})},b=t=>{if(t){C(t).forEach((e,o)=>{const n=u.get(o);if(e!==n){const s=a.get(o);s==null||s.l.forEach(r=>r(t))}});return}for(;f.size;){const e=Array.from(f);f.clear(),e.forEach(([o,n])=>{const s=v(void 0,o);if(s&&s.d!==(n==null?void 0:n.d)&&ce(void 0,o,s,n==null?void 0:n.d),n&&!n.y&&(s==null?void 0:s.y))return;const r=a.get(o);r==null||r.l.forEach(c=>c())})}},ye=t=>{C(t).forEach((e,o)=>{const n=u.get(o);(!n||e.r>n.r||e.y!==n.y||e.r===n.r&&e.d!==n.d)&&(u.set(o,e),e.d!==(n==null?void 0:n.d)&&ce(t,o,e,n==null?void 0:n.d))})},me=(t,e)=>{e&&ye(e),b(void 0)},Se=(t,e,o)=>{const n=we(o,t).l;return n.add(e),()=>{n.delete(e),he(o,t)}},ge=(t,e)=>{for(const[o,n]of t)W(o)&&(I(e,o,n),q(e,o));b(e)};return{[V]:ve,[x]:se,[z]:me,[D]:Se,[ae]:ge}},Ce=R("unstable_createStore",i=>{const u=ee(i),a=d=>{const p=u[V](d);if("e"in p)throw p.e;if(!("p"in p))return p.v},f=d=>new Promise((p,m)=>{const w=u[V](d);"e"in w?m(w.e):"p"in w?p(w.p.then(()=>f(d))):p(w.v)});return{get:a,asyncGet:f,set:(d,p)=>u[x](d,p),sub:(d,p)=>u[D](d,p),SECRET_INTERNAL_store:u}}),te=(i,u)=>({s:u?u(i).SECRET_INTERNAL_store:ee(i)}),j=new Map,L=R("SECRET_INTERNAL_getScopeContext",i=>(j.has(i)||j.set(i,U(te())),j.get(i))),Pe=R("Provider",({children:i,initialValues:u,scope:a,unstable_createStore:f,unstable_enableVersionedWrite:d})=>{const[p,m]=G({});T(()=>{const v=w.current;v.w&&(v.s[z](null,p),delete p.p,v.v=p)},[p]);const w=H();if(!w.current){const v=te(u,f);if(d){let S=0;v.w=g=>{m(h=>{const E=S?h:{p:h};return g(E),E})},v.v=p,v.r=g=>{++S,g(),--S}}w.current=v}const C=L(a);return J(C.Provider,{value:w.current},i)});let le=0;function fe(i,u){const a=`atom${++le}`,f={toString:()=>a};return typeof i=="function"?f.read=i:(f.init=i,f.read=d=>d(f),f.write=(d,p,m)=>p(f,typeof m=="function"?m(d(f)):m)),u&&(f.write=u),f}function ne(i,u){const a=L(u),f=N(a),{s:d,v:p}=f,m=h=>{const E=d[V](i,h);if("e"in E)throw E.e;if("p"in E)throw E.p;if("v"in E)return E.v;throw new Error("no atom value")},[[w,C,v],S]=K((h,E)=>{const _=m(E);return Object.is(h[1],_)&&h[2]===i?h:[E,_,i]},p,h=>{const E=m(h);return[h,E,i]});let g=C;return v!==i&&(S(w),g=m(w)),T(()=>{const{v:h}=f;h&&d[z](i,h);const E=d[D](i,S,h);return S(h),E},[d,i,f]),T(()=>{d[z](i,w)}),Q(g),g}function re(i,u){const a=L(u),{s:f,w:d}=N(a);return X(p=>{const m=w=>f[x](i,p,w);return d?d(m):m()},[f,d,i])}function de(i,u){return"scope"in i&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),u=i.scope),[ne(i,u),re(i,u)]}}}});
